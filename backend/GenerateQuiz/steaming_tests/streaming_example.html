<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Live Quiz Stream</title>
</head>
<body>
    <h1>Live Quiz Questions</h1>
    <div id="questions"></div>

    <script>
        console.log("Running stupid fucking JS script")

        var eventSource = new EventSource("http://localhost:8000/stream-quiz-questions");
        // var eventSource = new EventSource("http://localhost:8000/stream");

        var eventCount = 0;  // Initialize a counter to track the number of received events
        const maxEvents = 10; // Set the maximum number of events

        eventSource.onmessage = function(event) {
            console.log(eventCount);
            console.log("New event:", event);
            console.log("Event data:", event.data);

            var data = JSON.parse(event.data);
            var div = document.createElement("div");
            div.textContent = `Question: ${data.question} - A: ${data.A}, B: ${data.B}, C: ${data.C}, Answer: ${data.answer}`;
            document.getElementById("questions").appendChild(div);

            eventCount++; // Increment the counter for each event
            if (eventCount >= maxEvents) {
                eventSource.close(); // Close the EventSource after receiving the maximum number of events
                console.log("EventSource closed after receiving max events.");
            }
        };

        eventSource.onerror = function(event) {
            console.error("REE - An unknown error occurred:");
            eventSource.close();
        }
    </script>
</body>
</html>
